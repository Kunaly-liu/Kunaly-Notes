# Java å¼‚å¸¸å¤„ç†

## 1.  Java å¼‚å¸¸çš„æ¦‚å¿µ

å¼‚å¸¸æ˜¯ç¨‹åºä¸­çš„ä¸€äº›é”™è¯¯ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„é”™è¯¯éƒ½æ˜¯å¼‚å¸¸ï¼Œå¹¶ä¸”é”™è¯¯æœ‰æ—¶å€™æ˜¯å¯ä»¥é¿å…çš„ã€‚

æ¯”å¦‚è¯´ï¼Œä½ çš„ä»£ç å°‘äº†ä¸€ä¸ªåˆ†å·ï¼Œé‚£ä¹ˆè¿è¡Œå‡ºæ¥ç»“æœæ˜¯æç¤ºæ˜¯é”™è¯¯ java.lang.Errorï¼›å¦‚æœä½ ç”¨System.out.println(11/0)ï¼Œé‚£ä¹ˆä½ æ˜¯å› ä¸ºä½ ç”¨0åšäº†é™¤æ•°ï¼Œä¼šæŠ›å‡º java.lang.ArithmeticException çš„å¼‚å¸¸ã€‚

å¼‚å¸¸å‘ç”Ÿçš„åŸå› æœ‰å¾ˆå¤šï¼Œé€šå¸¸åŒ…å«ä»¥ä¸‹å‡ å¤§ç±»ï¼š

- ç”¨æˆ·è¾“å…¥äº†éæ³•æ•°æ®ã€‚
- è¦æ‰“å¼€çš„æ–‡ä»¶ä¸å­˜åœ¨ã€‚
- ç½‘ç»œé€šä¿¡æ—¶è¿æ¥ä¸­æ–­ï¼Œæˆ–è€…JVMå†…å­˜æº¢å‡ºã€‚

è¿™äº›å¼‚å¸¸æœ‰çš„æ˜¯å› ä¸ºç”¨æˆ·é”™è¯¯å¼•èµ·ï¼Œæœ‰çš„æ˜¯ç¨‹åºé”™è¯¯å¼•èµ·çš„ï¼Œè¿˜æœ‰å…¶å®ƒä¸€äº›æ˜¯å› ä¸ºç‰©ç†é”™è¯¯å¼•èµ·çš„ã€‚-

è¦ç†è§£Javaå¼‚å¸¸å¤„ç†æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä½ éœ€è¦æŒæ¡ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„å¼‚å¸¸ï¼š

- **æ£€æŸ¥æ€§å¼‚å¸¸ï¼š**æœ€å…·ä»£è¡¨çš„æ£€æŸ¥æ€§å¼‚å¸¸æ˜¯ç”¨æˆ·é”™è¯¯æˆ–é—®é¢˜å¼•èµ·çš„å¼‚å¸¸ï¼Œè¿™æ˜¯ç¨‹åºå‘˜æ— æ³•é¢„è§çš„ã€‚ä¾‹å¦‚è¦æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨æ–‡ä»¶æ—¶ï¼Œä¸€ä¸ªå¼‚å¸¸å°±å‘ç”Ÿäº†ï¼Œè¿™äº›å¼‚å¸¸åœ¨ç¼–è¯‘æ—¶ä¸èƒ½è¢«ç®€å•åœ°å¿½ç•¥ã€‚
- **è¿è¡Œæ—¶å¼‚å¸¸ï¼š** è¿è¡Œæ—¶å¼‚å¸¸æ˜¯å¯èƒ½è¢«ç¨‹åºå‘˜é¿å…çš„å¼‚å¸¸ã€‚ä¸æ£€æŸ¥æ€§å¼‚å¸¸ç›¸åï¼Œè¿è¡Œæ—¶å¼‚å¸¸å¯ä»¥åœ¨ç¼–è¯‘æ—¶è¢«å¿½ç•¥ã€‚
- **é”™è¯¯ï¼š** é”™è¯¯ä¸æ˜¯å¼‚å¸¸ï¼Œè€Œæ˜¯è„±ç¦»ç¨‹åºå‘˜æ§åˆ¶çš„é—®é¢˜ã€‚é”™è¯¯åœ¨ä»£ç ä¸­é€šå¸¸è¢«å¿½ç•¥ã€‚ä¾‹å¦‚ï¼Œå½“æ ˆæº¢å‡ºæ—¶ï¼Œä¸€ä¸ªé”™è¯¯å°±å‘ç”Ÿäº†ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘ä¹Ÿæ£€æŸ¥ä¸åˆ°çš„ã€‚

## 2. Java å¼‚å¸¸ç»§æ‰¿æ¡†æ¶

![img](https://gitee.com/Kunaly/picture-bed/raw/master/img/1075644-20181014104324864-1947735438.png)

å¸¸è§éæ£€æŸ¥æ€§å¼‚å¸¸ï¼š

| **å¼‚å¸¸**                        | **æè¿°**                                                     |
| :------------------------------ | :----------------------------------------------------------- |
| ArithmeticException             | å½“å‡ºç°å¼‚å¸¸çš„è¿ç®—æ¡ä»¶æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•´æ•°"é™¤ä»¥é›¶"æ—¶ï¼ŒæŠ›å‡ºæ­¤ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ |
| ArrayIndexOutOfBoundsException  | ç”¨éæ³•ç´¢å¼•è®¿é—®æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚å¦‚æœç´¢å¼•ä¸ºè´Ÿæˆ–å¤§äºç­‰äºæ•°ç»„å¤§å°ï¼Œåˆ™è¯¥ç´¢å¼•ä¸ºéæ³•ç´¢å¼•ã€‚ |
| ArrayStoreException             | è¯•å›¾å°†é”™è¯¯ç±»å‹çš„å¯¹è±¡å­˜å‚¨åˆ°ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚         |
| ClassCastException              | å½“è¯•å›¾å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚         |
| IllegalArgumentException        | æŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜å‘æ–¹æ³•ä¼ é€’äº†ä¸€ä¸ªä¸åˆæ³•æˆ–ä¸æ­£ç¡®çš„å‚æ•°ã€‚         |
| IllegalMonitorStateException    | æŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜æŸä¸€çº¿ç¨‹å·²ç»è¯•å›¾ç­‰å¾…å¯¹è±¡çš„ç›‘è§†å™¨ï¼Œæˆ–è€…è¯•å›¾é€šçŸ¥å…¶ä»–æ­£åœ¨ç­‰å¾…å¯¹è±¡çš„ç›‘è§†å™¨è€Œæœ¬èº«æ²¡æœ‰æŒ‡å®šç›‘è§†å™¨çš„çº¿ç¨‹ã€‚ |
| IllegalStateException           | åœ¨éæ³•æˆ–ä¸é€‚å½“çš„æ—¶é—´è°ƒç”¨æ–¹æ³•æ—¶äº§ç”Ÿçš„ä¿¡å·ã€‚æ¢å¥è¯è¯´ï¼Œå³ Java ç¯å¢ƒæˆ– Java åº”ç”¨ç¨‹åºæ²¡æœ‰å¤„äºè¯·æ±‚æ“ä½œæ‰€è¦æ±‚çš„é€‚å½“çŠ¶æ€ä¸‹ã€‚ |
| IllegalThreadStateException     | çº¿ç¨‹æ²¡æœ‰å¤„äºè¯·æ±‚æ“ä½œæ‰€è¦æ±‚çš„é€‚å½“çŠ¶æ€æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚           |
| IndexOutOfBoundsException       | æŒ‡ç¤ºæŸæ’åºç´¢å¼•ï¼ˆä¾‹å¦‚å¯¹æ•°ç»„ã€å­—ç¬¦ä¸²æˆ–å‘é‡çš„æ’åºï¼‰è¶…å‡ºèŒƒå›´æ—¶æŠ›å‡ºã€‚ |
| NegativeArraySizeException      | å¦‚æœåº”ç”¨ç¨‹åºè¯•å›¾åˆ›å»ºå¤§å°ä¸ºè´Ÿçš„æ•°ç»„ï¼Œåˆ™æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚           |
| NullPointerException            | å½“åº”ç”¨ç¨‹åºè¯•å›¾åœ¨éœ€è¦å¯¹è±¡çš„åœ°æ–¹ä½¿ç”¨ `null` æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸     |
| NumberFormatException           | å½“åº”ç”¨ç¨‹åºè¯•å›¾å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ç§æ•°å€¼ç±»å‹ï¼Œä½†è¯¥å­—ç¬¦ä¸²ä¸èƒ½è½¬æ¢ä¸ºé€‚å½“æ ¼å¼æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ |
| SecurityException               | ç”±å®‰å…¨ç®¡ç†å™¨æŠ›å‡ºçš„å¼‚å¸¸ï¼ŒæŒ‡ç¤ºå­˜åœ¨å®‰å…¨ä¾µçŠ¯ã€‚                   |
| StringIndexOutOfBoundsException | æ­¤å¼‚å¸¸ç”± `String` æ–¹æ³•æŠ›å‡ºï¼ŒæŒ‡ç¤ºç´¢å¼•æˆ–è€…ä¸ºè´Ÿï¼Œæˆ–è€…è¶…å‡ºå­—ç¬¦ä¸²çš„å¤§å°ã€‚ |
| UnsupportedOperationException   | å½“ä¸æ”¯æŒè¯·æ±‚çš„æ“ä½œæ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚                           |

å¸¸è§æ£€æŸ¥æ€§å¼‚å¸¸ï¼š

| **å¼‚å¸¸**                   | **æè¿°**                                                     |
| :------------------------- | :----------------------------------------------------------- |
| ClassNotFoundException     | åº”ç”¨ç¨‹åºè¯•å›¾åŠ è½½ç±»æ—¶ï¼Œæ‰¾ä¸åˆ°ç›¸åº”çš„ç±»ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚           |
| CloneNotSupportedException | å½“è°ƒç”¨ `Object` ç±»ä¸­çš„ `clone` æ–¹æ³•å…‹éš†å¯¹è±¡ï¼Œä½†è¯¥å¯¹è±¡çš„ç±»æ— æ³•å®ç° `Cloneable` æ¥å£æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ |
| IllegalAccessException     | æ‹’ç»è®¿é—®ä¸€ä¸ªç±»çš„æ—¶å€™ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚                           |
| InstantiationException     | å½“è¯•å›¾ä½¿ç”¨ `Class` ç±»ä¸­çš„ `newInstance` æ–¹æ³•åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œè€ŒæŒ‡å®šçš„ç±»å¯¹è±¡å› ä¸ºæ˜¯ä¸€ä¸ªæ¥å£æˆ–æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»è€Œæ— æ³•å®ä¾‹åŒ–æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ |
| InterruptedException       | ä¸€ä¸ªçº¿ç¨‹è¢«å¦ä¸€ä¸ªçº¿ç¨‹ä¸­æ–­ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚                       |
| NoSuchFieldException       | è¯·æ±‚çš„å˜é‡ä¸å­˜åœ¨                                             |
| NoSuchMethodException      | è¯·æ±‚çš„æ–¹æ³•ä¸å­˜åœ¨                                             |

 Throwable ç±»çš„ä¸»è¦æ–¹æ³•:

| **åºå·** | **æ–¹æ³•åŠè¯´æ˜**                                               |
| :------- | :----------------------------------------------------------- |
| 1        | **public String getMessage()** è¿”å›å…³äºå‘ç”Ÿçš„å¼‚å¸¸çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™ä¸ªæ¶ˆæ¯åœ¨Throwable ç±»çš„æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–äº†ã€‚ |
| 2        | **public Throwable getCause()** è¿”å›ä¸€ä¸ªThrowable å¯¹è±¡ä»£è¡¨å¼‚å¸¸åŸå› ã€‚ |
| 3        | **public String toString()** ä½¿ç”¨getMessage()çš„ç»“æœè¿”å›ç±»çš„ä¸²çº§åå­—ã€‚ |
| 4        | **public void printStackTrace()** æ‰“å°toString()ç»“æœå’Œæ ˆå±‚æ¬¡åˆ°System.errï¼Œå³é”™è¯¯è¾“å‡ºæµã€‚ |
| 5        | **public StackTraceElement [] getStackTrace()** è¿”å›ä¸€ä¸ªåŒ…å«å †æ ˆå±‚æ¬¡çš„æ•°ç»„ã€‚ä¸‹æ ‡ä¸º0çš„å…ƒç´ ä»£è¡¨æ ˆé¡¶ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä»£è¡¨æ–¹æ³•è°ƒç”¨å †æ ˆçš„æ ˆåº•ã€‚ |
| 6        | **public Throwable fillInStackTrace()** ç”¨å½“å‰çš„è°ƒç”¨æ ˆå±‚æ¬¡å¡«å……Throwable å¯¹è±¡æ ˆå±‚æ¬¡ï¼Œæ·»åŠ åˆ°æ ˆå±‚æ¬¡ä»»ä½•å…ˆå‰ä¿¡æ¯ä¸­ã€‚ |

## 3. å¼‚å¸¸å¤„ç†

### 3.1 try-catch

```java
try{
    //code that might generate exceptions    
}catch(Exception e){
    //the code of handling exception1
}
```

ä½¿ç”¨ try å’Œ catch å…³é”®å­—å¯ä»¥æ•è·å¼‚å¸¸ã€‚try/catch ä»£ç å—æ”¾åœ¨å¼‚å¸¸å¯èƒ½å‘ç”Ÿçš„åœ°æ–¹ã€‚

Catch è¯­å¥åŒ…å«è¦æ•è·å¼‚å¸¸ç±»å‹çš„å£°æ˜ã€‚å½“ä¿æŠ¤ä»£ç å—ä¸­å‘ç”Ÿä¸€ä¸ªå¼‚å¸¸æ—¶ï¼Œtry åé¢çš„ catch å—å°±ä¼šè¢«æ£€æŸ¥ã€‚

å¦‚æœå‘ç”Ÿçš„å¼‚å¸¸åŒ…å«åœ¨ catch å—ä¸­ï¼Œå¼‚å¸¸ä¼šè¢«ä¼ é€’åˆ°è¯¥ catch å—ï¼Œè¿™å’Œä¼ é€’ä¸€ä¸ªå‚æ•°åˆ°æ–¹æ³•æ˜¯ä¸€æ ·ã€‚

**å®ä¾‹ï¼š**

ä¸‹é¢çš„ä¾‹å­ä¸­å£°æ˜æœ‰ä¸¤ä¸ªå…ƒç´ çš„ä¸€ä¸ªæ•°ç»„ï¼Œå½“ä»£ç è¯•å›¾è®¿é—®æ•°ç»„çš„ç¬¬ä¸‰ä¸ªå…ƒç´ çš„æ—¶å€™å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚

```java
public class ExcepTest {
    public static void main(String args[]){
        try{
            int a[] = new int[2];
            System.out.println("Access element three :" + a[3]);
        }catch(ArrayIndexOutOfBoundsException e){
            System.out.println("Exception thrown  :" + e);
        }
        System.out.println("Out of the block");
    }
}
```

ä»¥ä¸Šä»£ç ç¼–è¯‘è¿è¡Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```java
Exception thrown  :java.lang.ArrayIndexOutOfBoundsException: 3
Out of the block
```

### 3.2 å¤šé‡æ•è·

ä¸€ä¸ª try ä»£ç å—åé¢è·Ÿéšå¤šä¸ª catch ä»£ç å—çš„æƒ…å†µå°±å«å¤šé‡æ•è·ã€‚

å¤šé‡æ•è·å—çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
try{
   // ç¨‹åºä»£ç 
}catch(å¼‚å¸¸ç±»å‹1 å¼‚å¸¸çš„å˜é‡å1){
  // ç¨‹åºä»£ç 
}catch(å¼‚å¸¸ç±»å‹2 å¼‚å¸¸çš„å˜é‡å2){
  // ç¨‹åºä»£ç 
}catch(å¼‚å¸¸ç±»å‹3 å¼‚å¸¸çš„å˜é‡å3){
  // ç¨‹åºä»£ç 
}
```

ä¸Šé¢çš„ä»£ç æ®µåŒ…å«äº† 3 ä¸ª catchå—ã€‚

å¯ä»¥åœ¨ try è¯­å¥åé¢æ·»åŠ ä»»æ„æ•°é‡çš„ catch å—ã€‚

å¦‚æœä¿æŠ¤ä»£ç ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œå¼‚å¸¸è¢«æŠ›ç»™ç¬¬ä¸€ä¸ª catch å—ã€‚

å¦‚æœæŠ›å‡ºå¼‚å¸¸çš„æ•°æ®ç±»å‹ä¸ `ExceptionType1` åŒ¹é…ï¼Œå®ƒåœ¨è¿™é‡Œå°±ä¼šè¢«æ•è·ã€‚

å¦‚æœä¸åŒ¹é…ï¼Œå®ƒä¼šè¢«ä¼ é€’ç»™ç¬¬äºŒä¸ª catch å—ã€‚

å¦‚æ­¤ï¼Œç›´åˆ°å¼‚å¸¸è¢«æ•è·æˆ–è€…é€šè¿‡æ‰€æœ‰çš„ catch å—ã€‚

### 3.3 throw

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªæ˜¯è·å–äº†è¢«Javaè¿è¡Œæ—¶ç³»ç»Ÿå¼•å‘çš„å¼‚å¸¸ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨`throw`è¯­å¥æŠ›å‡ºæ˜ç¡®çš„å¼‚å¸¸ã€‚`Throw`çš„è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š

```java
throw ThrowableInstance;
```

è¿™é‡Œçš„ThrowableInstanceä¸€å®šæ˜¯`Throwable`ç±»ç±»å‹æˆ–è€…`Throwable`å­ç±»ç±»å‹çš„ä¸€ä¸ªå¯¹è±¡ã€‚

ç¨‹åºæ‰§è¡Œå®Œ`throw`è¯­å¥ä¹‹åç«‹å³åœæ­¢ï¼›`throw`åé¢çš„ä»»ä½•è¯­å¥ä¸è¢«æ‰§è¡Œï¼Œæœ€é‚»è¿‘çš„`try`å—ç”¨æ¥æ£€æŸ¥å®ƒæ˜¯å¦å«æœ‰ä¸€ä¸ªä¸å¼‚å¸¸ç±»å‹åŒ¹é…çš„`catch`è¯­å¥ã€‚å¦‚æœå‘ç°äº†åŒ¹é…çš„å—ï¼Œæ§åˆ¶è½¬å‘è¯¥è¯­å¥ï¼›å¦‚æœæ²¡æœ‰å‘ç°ï¼Œæ¬¡åŒ…å›´çš„`try`å—æ¥æ£€æŸ¥ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœæ²¡æœ‰å‘ç°åŒ¹é…çš„`catch`å—ï¼Œé»˜è®¤å¼‚å¸¸å¤„ç†ç¨‹åºä¸­æ–­ç¨‹åºçš„æ‰§è¡Œå¹¶ä¸”æ‰“å°å †æ ˆè½¨è¿¹ã€‚

```java
public class ExcepTest {
    public static void main(String args[]){
        try{
            proc();
        }catch(NullPointerException e){
            System.out.println("Recaught: "+e);
        }
    }

    static void proc(){
        try{
            throw new NullPointerException("demo");
        }catch(NullPointerException e){
            System.out.println("Caught inside proc");
            throw e;
        }
    }

}
```

è¿è¡Œç»“æœï¼š

```java
Caught inside proc
 
Recaught: java.lang.NullPointerException: demo
```

è¯¥ç¨‹åºä¸¤æ¬¡å¤„ç†ç›¸åŒçš„é”™è¯¯ï¼Œé¦–å…ˆï¼Œ`main()`æ–¹æ³•è®¾ç«‹äº†ä¸€ä¸ªå¼‚å¸¸å…³ç³»ç„¶åè°ƒç”¨proc()ã€‚proc()æ–¹æ³•è®¾ç«‹äº†å¦ä¸€ä¸ªå¼‚å¸¸å¤„ç†å…³ç³»å¹¶ä¸”ç«‹å³æŠ›å‡ºä¸€ä¸ª`NullPointerException`å®ä¾‹ï¼Œ`NullPointerException`åœ¨`main()`ä¸­è¢«å†æ¬¡æ•è·ã€‚

è¯¥ç¨‹åºé˜è¿°äº†æ€æ ·åˆ›å»ºJavaçš„æ ‡å‡†å¼‚å¸¸å¯¹è±¡ï¼Œç‰¹åˆ«æ³¨æ„è¿™ä¸€è¡Œï¼š`throw new NullPointerException("demo");`

æ­¤å¤„`new`ç”¨æ¥æ„é€ ä¸€ä¸ª`NullPointerException`å®ä¾‹ï¼Œæ‰€æœ‰çš„Javaå†…ç½®çš„è¿è¡Œæ—¶å¼‚å¸¸æœ‰ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼šä¸€ä¸ªæ²¡æœ‰å‚æ•°ï¼Œä¸€ä¸ªå¸¦æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ã€‚å½“ç”¨ç¬¬äºŒç§å½¢å¼æ—¶ï¼Œå‚æ•°æŒ‡å®šæè¿°å¼‚å¸¸çš„å­—ç¬¦ä¸²ã€‚å¦‚æœå¯¹è±¡ç”¨ä½œ`print()`æˆ–è€…`println()`çš„å‚æ•°æ—¶ï¼Œè¯¥å­—ç¬¦ä¸²è¢«æ˜¾ç¤ºã€‚è¿™åŒæ ·å¯ä»¥é€šè¿‡è°ƒç”¨getMessage()æ¥å®ç°ï¼ŒgetMessage()æ˜¯ç”±`Throwable`å®šä¹‰çš„ã€‚

### 3.4 throws

å¦‚æœä¸€ä¸ªæ–¹æ³•å¯ä»¥å¯¼è‡´ä¸€ä¸ªå¼‚å¸¸ä½†ä¸å¤„ç†å®ƒï¼Œå®ƒå¿…é¡»æŒ‡å®šè¿™ç§è¡Œä¸ºä»¥ä½¿æ–¹æ³•çš„è°ƒç”¨è€…å¯ä»¥ä¿æŠ¤å®ƒä»¬è‡ªå·±è€Œä¸å‘ç”Ÿå¼‚å¸¸ã€‚è¦åšåˆ°è¿™ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•å£°æ˜ä¸­åŒ…å«ä¸€ä¸ª`throws`å­å¥ã€‚ä¸€ä¸ª`throws`å­å¥åˆ—ä¸¾äº†ä¸€ä¸ªæ–¹æ³•å¯èƒ½å¼•å‘çš„æ‰€æœ‰å¼‚å¸¸ç±»å‹ã€‚è¿™å¯¹äºé™¤äº†`Error`æˆ–`RuntimeException`åŠå®ƒä»¬å­ç±»ä»¥å¤–ç±»å‹çš„æ‰€æœ‰å¼‚å¸¸æ˜¯å¿…è¦çš„ã€‚ä¸€ä¸ªæ–¹æ³•å¯ä»¥å¼•å‘çš„æ‰€æœ‰å…¶ä»–ç±»å‹çš„å¼‚å¸¸å¿…é¡»åœ¨`throws`å­å¥ä¸­å£°æ˜ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚

ä¸‹é¢æ˜¯`throws`å­å¥çš„æ–¹æ³•å£°æ˜çš„é€šç”¨å½¢å¼ï¼š

```java
public void info() throws Exception
{
   //body of method
}
```

Exception æ˜¯è¯¥æ–¹æ³•å¯èƒ½å¼•å‘çš„æ‰€æœ‰çš„å¼‚å¸¸,ä¹Ÿå¯ä»¥æ˜¯å¼‚å¸¸åˆ—è¡¨ï¼Œä¸­é—´ä»¥é€—å·éš”å¼€ã€‚

**å®ä¾‹ï¼š**

```java
class TestThrows{
    static void throw1() throws IllegalAccessException {
        System.out.println("Inside throw1 . ");
        throw new IllegalAccessException("demo");
    }
    public static void main(String[] args){
        try {
            throw1();
        }catch(IllegalAccessException e ){
            System.out.println("Caught " + e);
        }
    }
}
```

`Throws`æŠ›å‡ºå¼‚å¸¸çš„è§„åˆ™ï¼š

- å¦‚æœæ˜¯ä¸å—æ£€æŸ¥å¼‚å¸¸ï¼ˆ`unchecked exception`ï¼‰ï¼Œå³`Error`ã€`RuntimeException`æˆ–å®ƒä»¬çš„å­ç±»ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ä½¿ç”¨`throws`å…³é”®å­—æ¥å£°æ˜è¦æŠ›å‡ºçš„å¼‚å¸¸ï¼Œç¼–è¯‘ä»èƒ½é¡ºåˆ©é€šè¿‡ï¼Œä½†åœ¨è¿è¡Œæ—¶ä¼šè¢«ç³»ç»ŸæŠ›å‡ºã€‚
- å¿…é¡»å£°æ˜æ–¹æ³•å¯æŠ›å‡ºçš„ä»»ä½•æ£€æŸ¥å¼‚å¸¸ï¼ˆ`checked exception`ï¼‰ã€‚å³å¦‚æœä¸€ä¸ªæ–¹æ³•å¯èƒ½å‡ºç°æ£€æŸ¥å¼‚å¸¸ï¼Œè¦ä¹ˆç”¨`try-catch`è¯­å¥æ•è·ï¼Œè¦ä¹ˆç”¨`throws`å­å¥å£°æ˜å°†å®ƒæŠ›å‡ºï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚
- å½“æŠ›å‡ºäº†å¼‚å¸¸ï¼Œè¯¥æ–¹æ³•çš„è°ƒç”¨è€…æ‰å¿…é¡»å¤„ç†æˆ–è€…é‡æ–°æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚å½“æ–¹æ³•çš„è°ƒç”¨è€…æ— åŠ›å¤„ç†è¯¥å¼‚å¸¸çš„æ—¶å€™ï¼Œåº”è¯¥ç»§ç»­æŠ›å‡ºã€‚ 
- è°ƒç”¨æ–¹æ³•å¿…é¡»éµå¾ªä»»ä½•å¯æŸ¥å¼‚å¸¸çš„å¤„ç†å’Œå£°æ˜è§„åˆ™ã€‚è‹¥è¦†ç›–ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™ä¸èƒ½å£°æ˜ä¸è¦†ç›–æ–¹æ³•ä¸åŒçš„å¼‚å¸¸ã€‚å£°æ˜çš„ä»»ä½•å¼‚å¸¸å¿…é¡»æ˜¯è¢«è¦†ç›–æ–¹æ³•æ‰€å£°æ˜å¼‚å¸¸çš„åŒç±»æˆ–å­ç±»ã€‚

### 3.5 finally

finally å…³é”®å­—ç”¨æ¥åˆ›å»ºåœ¨ try ä»£ç å—åé¢æ‰§è¡Œçš„ä»£ç å—ã€‚

æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œfinally ä»£ç å—ä¸­çš„ä»£ç æ€»ä¼šè¢«æ‰§è¡Œã€‚

åœ¨ finally ä»£ç å—ä¸­ï¼Œå¯ä»¥è¿è¡Œæ¸…ç†ç±»å‹ç­‰æ”¶å°¾å–„åæ€§è´¨çš„è¯­å¥ã€‚

finally ä»£ç å—å‡ºç°åœ¨ catch ä»£ç å—æœ€åï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

```java
try{
  // ç¨‹åºä»£ç 
}catch(å¼‚å¸¸ç±»å‹1 å¼‚å¸¸çš„å˜é‡å1){
  // ç¨‹åºä»£ç 
}catch(å¼‚å¸¸ç±»å‹2 å¼‚å¸¸çš„å˜é‡å2){
  // ç¨‹åºä»£ç 
}finally{
  // ç¨‹åºä»£ç 
}
```

**å®ä¾‹ï¼š**

```java
public class ExcepTest{
  public static void main(String args[]){
    int a[] = new int[2];
    try{
       System.out.println("Access element three :" + a[3]);
    }catch(ArrayIndexOutOfBoundsException e){
       System.out.println("Exception thrown  :" + e);
    }
    finally{
       a[0] = 6;
       System.out.println("First element value: " +a[0]);
       System.out.println("The finally statement is executed");
    }
  }
}
```

è¾“å‡ºç»“æœï¼š

```java
Exception thrown  :java.lang.ArrayIndexOutOfBoundsException: 3
First element value: 6
The finally statement is executed
```

**æ³¨æ„ï¼š**

- catch ä¸èƒ½ç‹¬ç«‹äº try å­˜åœ¨ã€‚
- åœ¨ try/catch åé¢æ·»åŠ  finally å—å¹¶éå¼ºåˆ¶æ€§è¦æ±‚çš„ã€‚
- try, catch, finally å—ä¹‹é—´ä¸èƒ½æ·»åŠ ä»»ä½•ä»£ç ã€‚
- `finally`å­å¥æ˜¯å¯é€‰é¡¹ï¼Œå¯ä»¥æœ‰ä¹Ÿå¯ä»¥æ— ï¼Œä½†æ˜¯æ¯ä¸ª`try`è¯­å¥è‡³å°‘éœ€è¦ä¸€ä¸ª`catch`æˆ–è€…`finally`å­å¥ã€‚
- å¦‚æœ`finally`å—ä¸ä¸€ä¸ª`try`è”åˆä½¿ç”¨ï¼Œ`finally`å—å°†åœ¨`try`ç»“æŸä¹‹å‰æ‰§è¡Œã€‚

## 4. å¼‚å¸¸é“¾

å¼‚å¸¸é“¾é¡¾åæ€ä¹‰å°±æ˜¯å°†å¼‚å¸¸å‘ç”Ÿçš„åŸå› ä¸€ä¸ªä¼ ä¸€ä¸ªä¸²èµ·æ¥ï¼Œå³æŠŠåº•å±‚çš„å¼‚å¸¸ä¿¡æ¯ä¼ ç»™ä¸Šå±‚ï¼Œè¿™æ ·é€å±‚æŠ›å‡ºã€‚ Java APIæ–‡æ¡£ä¸­ç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„æ¨¡å‹ï¼š

```java
try {   
    lowLevelOp();   
} catch (LowLevelException le) {   
    throw (HighLevelException) new HighLevelException().initCause(le);   
}
```

å½“ç¨‹åºæ•è·åˆ°äº†ä¸€ä¸ªåº•å±‚å¼‚å¸¸ï¼Œåœ¨å¤„ç†éƒ¨åˆ†é€‰æ‹©äº†ç»§ç»­æŠ›å‡ºä¸€ä¸ªæ›´é«˜çº§åˆ«çš„æ–°å¼‚å¸¸ç»™æ­¤æ–¹æ³•çš„è°ƒç”¨è€…ã€‚ è¿™æ ·å¼‚å¸¸çš„åŸå› å°±ä¼šé€å±‚ä¼ é€’ã€‚è¿™æ ·ï¼Œä½äºé«˜å±‚çš„å¼‚å¸¸é€’å½’è°ƒç”¨getCause()æ–¹æ³•ï¼Œå°±å¯ä»¥éå†å„å±‚çš„å¼‚å¸¸åŸå› ã€‚ è¿™å°±æ˜¯`Javaå¼‚å¸¸é“¾`çš„åŸç†ã€‚å¼‚å¸¸é“¾çš„å®é™…åº”ç”¨å¾ˆå°‘ï¼Œå‘ç”Ÿå¼‚å¸¸æ—¶å€™é€å±‚ä¸ŠæŠ›ä¸æ˜¯ä¸ªå¥½æ³¨æ„ï¼Œ ä¸Šå±‚æ‹¿åˆ°è¿™äº›å¼‚å¸¸åˆèƒ½å¥ˆä¹‹ä½•ï¼Ÿè€Œä¸”å¼‚å¸¸é€å±‚ä¸ŠæŠ›ä¼šæ¶ˆè€—å¤§é‡èµ„æºï¼Œ å› ä¸ºè¦ä¿å­˜ä¸€ä¸ªå®Œæ•´çš„å¼‚å¸¸é“¾ä¿¡æ¯.

## 5. è‡ªå®šä¹‰å¼‚å¸¸

ä½¿ç”¨Javaå†…ç½®çš„å¼‚å¸¸ç±»å¯ä»¥æè¿°åœ¨ç¼–ç¨‹æ—¶å‡ºç°çš„å¤§éƒ¨åˆ†å¼‚å¸¸æƒ…å†µã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸ã€‚ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œåªéœ€ç»§æ‰¿`Exception`ç±»å³å¯ã€‚

åœ¨ç¨‹åºä¸­ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œå¤§ä½“å¯åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:

- åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ç±»ã€‚
- åœ¨æ–¹æ³•ä¸­é€šè¿‡`throw`å…³é”®å­—æŠ›å‡ºå¼‚å¸¸å¯¹è±¡ã€‚
- å¦‚æœåœ¨å½“å‰æŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ä¸­å¤„ç†å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨`try-catch`è¯­å¥æ•è·å¹¶å¤„ç†ï¼›å¦åˆ™åœ¨æ–¹æ³•çš„å£°æ˜å¤„é€šè¿‡`throws`å…³é”®å­—æŒ‡æ˜è¦æŠ›å‡ºç»™æ–¹æ³•è°ƒç”¨è€…çš„å¼‚å¸¸ï¼Œç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚
- åœ¨å‡ºç°å¼‚å¸¸æ–¹æ³•çš„è°ƒç”¨è€…ä¸­æ•è·å¹¶å¤„ç†å¼‚å¸¸ã€‚

ä¸¾ä¾‹è‡ªå®šä¹‰å¼‚å¸¸ï¼š

```java
class MyException extends Exception {
    private int detail;
    MyException(int a){
        detail = a;
    }
    public String toString(){
        return "MyException ["+ detail + "]";
    }
}
public class TestMyException{
    static void compute(int a) throws MyException{
        System.out.println("Called compute(" + a + ")");
        if(a > 10){
            throw new MyException(a);
        }
        System.out.println("Normal exit!");
    }
    public static void main(String [] args){
        try{
            compute(1);
            compute(20);
        }catch(MyException me){
            System.out.println("Caught " + me);
        }
    }
}
```

è¿è¡Œç»“æœï¼š

```java
Called compute(1)
Normal exit!
Called compute(20)
Caught MyException [20]
```



## ğŸ“š References

- èœé¸Ÿæ•™ç¨‹ JAVA
- https://www.cnblogs.com/happyliu/p/9785698.html
- https://blog.csdn.net/q_all_is_well/article/details/83020710

